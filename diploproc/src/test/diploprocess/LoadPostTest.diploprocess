import com.github.diplodoc.diplobase.domain.mongodb.Post
import com.github.diplodoc.diplobase.domain.mongodb.Source

test 'load-post'

mock module: 'post-loader', by: 'test.post-loader'

params post: new Post(url: 'url', source: new Source())

verify {
    assert it.listensTo.size == 0

    assert it.required.size == 1
    assert it.required[0] == 'post-loader'

    assert it.output.size == 1
    assert it.output[0].destination == null
    assert it.output[0].post.url == 'url'
    assert it.output[0].post.html == 'html'
}